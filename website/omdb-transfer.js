//Load dependencies
const mongoose = require('mongoose');
const http = require('http');

//Connect to database: movies
mongoose.Promise = require('bluebird');
mongoose.connect('mongodb://localhost:27017/movies', { useMongoClient: true });
const db = mongoose.connection;

//Load movie model
const model = require('./models');
const movie_model = model.Movie;

//Check if connected to database
db.on('error', err => {
    console.log('Error while connecting to DB: ${err.message}') ;
});
db.once('open', () => {
    console.log('Server connected successfully to DB!');
});

//Drop the existing database with "movies" tag
mongoose.connection.collections['movies'].drop( function(err) {
    console.log('collection dropped');
});

//Complete list of all movies.
//Has to be in the script, as javascript fileReader cannot read strings with special characters,
//and javascript cannot access the filesystem due to web-security reasons.
list_of_movies = [
  "Thor:+Ragnarok",
  "Justice+League",
  "Valerian+and+the+City+of+a+Thousand+Planets",
  "Star+Wars:+The+Last+Jedi",
  "Avengers:+Infinity+War",
  "Atomic+Blonde",
  "Geostorm",
  "Kingsman:+The+Golden+Circle",
  "Spider-Man:+Homecoming",
  "Baby+Driver",
  "The+Dark+Tower",
  "Wonder+Woman",
  "War+for+the+Planet+of+the+Apes",
  "American+Made",
  "Jungle",
  "Black+Panther",
  "The+Foreigner",
  "Thor",
  "Game+Night",
  "The+Mountain+Between+Us",
  "Dunkirk",
  "Thor:+The+Dark+World",
  "Deadpool+2",
  "Transformers:+The+Last+Knight",
  "Guardians+of+the+Galaxy+Vol.+2",
  "Pirates+of+the+Caribbean:+Dead+Men+Tell+No+Tales",
  "Jurassic+World:+Fallen+Kingdom",
  "The+Hitman's+Bodyguard",
  "Suicide+Squad",
  "Hellboy",
  "Mayhem",
  "6+Days",
  "M:I+6+-+Mission+Impossible",
  "The+Predator",
  "Baywatch",
  "Solo:+A+Star+Wars+Story",
  "The+Mummy",
  "Logan:+The+Wolverine",
  "Kingsman:+The+Secret+Service",
  "Aquaman",
  "Power+Rangers",
  "John+Wick:+Chapter+2",
  "Blade+of+the+Immortal",
  "Doctor+Strange",
  "Jumanji:+Welcome+to+the+Jungle",
  "The+Dark+Knight",
  "Rogue+One",
  "Avengers:+Age+of+Ultron",
  "Ocean's+Eight",
  "Captain+America:+Civil+War",
  "Star+Wars:+The+Force+Awakens",
  "V+for+Vendetta",
  "Despicable+Me+3",
  "Mad+Max:+Fury+Road",
  "X-Men:+Dark+Phoenix",
  "Ready+Player+One",
  "Batman+v+Superman:+Dawn+of+Justice",
  "The+Avengers",
  "Bright",
  "King+Arthur:+Legend+of+the+Sword",
  "What+Happened+to+Monday",
  "Guardians+of+the+Galaxy",
  "Deadpool",
  "Ant-Man",
  "Ant-Man+and+the+Wasp",
  "American+Assassin",
  "A+Prayer+Before+Dawn",
  "Assassin's+Creed",
  "Wheelman",
  "Inception",
  "The+Man+with+the+Iron+Heart",
  "John+Wick",
  "Ghostbusters",
  "Chappie",
  "Beyond+Skyline",
  "The+Fate+of+the+Furious",
  "The+New+Mutants",
  "Kidnap",
  "Godzilla:+King+of+Monsters",
  "Kong:+Skull+Island",
  "The+Magnificent+Seven",
  "Rise+of+the+Footsoldier+3",
  "Birth+of+the+Dragon",
  "Pacific+Rim+Uprising",
  "Overdrive",
  "The+Dark+Knight+Rises",
  "X-Men:+Apocalypse",
  "Top+Gun",
  "Ghost+in+the+Shell",
  "The+LEGO+Ninjago+Movie",
  "Tomb+Raider",
  "Acts+Of+Vengeance",
  "12+Strong",
  "Avatar",
  "Rampage",
  "Star+Wars:+Episode+IV+-+A+New+Hope",
  "The+Matrix",
  "Venom",
  "Dawn+of+the+Planet+of+the+Apes",
  "Star+Trek:+Beyond",
  "Coco",
  "The+Lion+King",
  "Cars+3",
  "Syng",
  "Paddington+2",
  "The+Emoji+Movie",
  "Peter+Rabbit",
  "Moana",
  "Pokémon+the+Movie:+I+Choose+You!",
  "Loving+Vincent",
  "The+Star",
  "Trolls",
  "Early+Man",
  "Frozen",
  "Ferdinand",
  "My+Little+Pony+Filmen",
  "Paddington",
  "Sherlock+Gnomes",
  "Your+Name",
  "Meet+the+Robinsons",
  "The+Nightmare+Before+Christmas",
  "Zootopia",
  "Incredibles+2",
  "Smurfs:+The+Lost+Village",
  "The+LEGO+Batman+Movie",
  "Kjæledyrenes+hemmelige+liv",
  "Captain+Underpants:+The+First+Epic+Movie",
  "Cars",
  "The+Book+of+Life",
  "The+Boss+Baby",
  "The+Incredibles",
  "Spirited+Away",
  "Inside+Out",
  "Big+Hero+6",
  "Sausage+Party",
  "Finding+Dory",
  "Finding+Nemo",
  "Up",
  "Aladdin",
  "Monsters,+Inc.",
  "Scooby-Doo",
  "The+Nut+Job+2:+Nutty+by+Nature",
  "Hercules",
  "Despicable+Me",
  "Toy+Story",
  "Isle+of+Dogs",
  "The+Breadwinner",
  "The+Lego+Movie",
  "Coraline",
  "Leap!",
  "Tangled",
  "A+Silent+Voice",
  "Mulan",
  "The+Polar+Express",
  "Beauty+and+the+Beast",
  "Storks",
  "Shrek",
  "Ratatouille",
  "Howl's+Moving+Castle",
  "WALL·E",
  "Kubo+and+the+Two+Strings",
  "Toy+Story+4",
  "Ice+Age:+Collision+Course",
  "Wreck-It+Ralph",
  "The+Little+Mermaid",
  "Ralph+Breaks+the+Internet:+Wreck-It+Ralph+2",
  "Toy+Story+3",
  "Despicable+Me+2",
  "Treasure+Planet",
  "Cars+2",
  "Princess+Mononoke",
  "Enchanted",
  "Brave",
  "The+Princess+and+the+Frog",
  "Pocahontas",
  "How+to+Train+Your+Dragon",
  "Corpse+Bride",
  "Who+Framed+Roger+Rabbit",
  "Anastasia",
  "Fantastic+Mr.+Fox",
  "The+Angry+Birds+Movie",
  "Aristokattene",
  "Hotel+Transylvania+2",
  "Toy+Story+2",
  "Hotel+Transylvania",
  "Space+Jam",
  "Kung+Fu+Panda",
  "A+Christmas+Carol",
  "The+Smurfs",
  "Madagascar",
  "A+Bug's+Life",
  "Dumbo",
  "Madagascar+3:+Europe's+Most+Wanted",
  "Grave+of+the+Fireflies",
  "Akira",
  "Kung+Fu+Panda+3",
  "The+Prince+of+Egypt",
  "A+Bad+Moms+Christmas",
  "Daddy's+Home+Two",
  "The+Disaster+Artist",
  "Three+Billboards+Outside+Ebbing,+Missouri",
  "Lady+Bird",
  "The+Babysitter",
  "Lucas",
  "Bad+Moms",
  "I+Love+You,+Daddy",
  "The+Goonies",
  "What+We+Do+in+the+Shadows",
  "Daddy's+Home",
  "Brigsby+Bear",
  "The+Meyerowitz+Stories+(New+and+Selected)",
  "Downsizing",
  "Last+Flag+Flying",
  "The+Big+Sick",
  "La+La+Land",
  "Ingrid+Goes+West",
  "The+Square",
  "Girls+Trip",
  "The+House",
  "Tyler+Perry's+Boo+2!+A+Madea+Halloween",
  "The+Man+Who+Invented+Christmas",
  "Why+Him?",
  "Men+in+Black",
  "Bitch",
  "Casper",
  "The+Death+of+Stalin",
  "Battle+of+the+Sexes",
  "Hunt+for+the+Wilderpeople",
  "The+Wolf+of+Wall+Street",
  "Rough+Night",
  "Better+Watch+Out",
  "Pitch+Perfect+3",
  "Hocus+Pocus",
  "License+to+Drive",
  "Charlie+and+the+Chocolate+Factory",
  "How+the+Grinch+Stole+Christmas",
  "The+Lobster",
  "Logan+Lucky",
  "Back+to+the+Future",
  "The+Lost+Boys",
  "Marjorie+Prime",
  "Coming+to+America",
  "Boo!+A+Madea+Halloween",
  "Beetlejuice",
  "Love+Actually",
  "Home+Again",
  "Dazed+and+Confused",
  "Office+Christmas+Party",
  "Mean+Girls",
  "Dream+a+Little+Dream",
  "Home+Alone",
  "Pitch+Perfect",
  "Scary+Movie",
  "The+Replacements",
  "The+Big+Short",
  "Snatch",
  "The+Grand+Budapest+Hotel",
  "The+Addams+Family",
  "Elf",
  "The+Breakfast+Club",
  "Harry+Potter+and+the+Sorcerer's+Stone",
  "Fantastic+Beasts+and+Where+to+Find+Them",
  "Secret+Superstar",
  "Wonderstruck",
  "Goodbye+Christopher+Robin",
  "The+Princess+Bride",
  "Harry+Potter+and+the+Goblet+of+Fire",
  "Fantastic+Beasts+and+Where+to+Find+Them+2",
  "Harry+Potter+and+the+Chamber+of+Secrets",
  "Cinderella",
  "A+Wrinkle+in+Time",
  "Field+of+Dreams",
  "The+Jungle+Book",
  "Mary+Poppins+Returns",
  "Maleficent",
  "Harry+Potter+and+the+Prisoner+of+Azkaban",
  "Tomorrowland",
  "Miss+Peregrine's+Home+for+Peculiar+Children",
  "Little+Monsters",
  "E.T.+the+Extra-Terrestrial",
  "Stardust",
  "Harry+Potter+and+the+Order+of+the+Phoenix",
  "Matilda",
  "Harry+Potter+and+the+Deathly+Hallows:+Part+1",
  "Men+in+Black+3",
  "Pixels",
  "The+Hobbit:+An+Unexpected+Journey",
  "Men+in+Black+II",
  "The+Sound+of+Music",
  "It's+a+Wonderful+Life",
  "Harry+Potter+and+the+Half-Blood+Prince",
  "The+Healer",
  "The+Chronicles+of+Narnia:+The+Lion,+the+Witch+and+the+Wardrobe",
  "The+Sandlot",
  "Jumanji",
  "Home+Alone+2:+Lost+in+New+York",
  "The+Last+Airbender",
  "Undercover+Grandpa",
  "The+Wizard+of+Oz",
  "Willy+Wonka+&+the+Chocolate+Factory",
  "The+Karate+Kid",
  "Hugo",
  "Hannah+Montana:+The+Movie",
  "A+Dog's+Purpose",
  "Father+of+the+Bride",
  "The+Big+Sleep",
  "Split+Second",
  "Sunset+Boulevard",
  "The+Third+Man",
  "Dial+M+for+Murder",
  "The+Maltese+Falcon",
  "The+Woman+on+Pier+13",
  "Double+Indemnity",
  "Strangers+on+a+Train",
  "Touch+of+Evil",
  "The+Night+of+the+Hunter",
  "Notorious",
  "Gilda",
  "Call+Northside+777",
  "Gaslight",
  "The+Killing",
  "Key+Largo",
  "Scarface",
  "Ace+in+the+Hole",
  "Laura",
  "Spellbound",
  "Mildred+Pierce",
  "Out+of+the+Past",
  "Don't+Bother+to+Knock",
  "The+Postman+Always+Rings+Twice",
  "Crossfire",
  "The+Killers",
  "The+Asphalt+Jungle",
  "I+Want+to+Live!",
  "In+a+Lonely+Place",
  "Kiss+Me+Deadly",
  "The+Wrong+Man",
  "The+Lady+from+Shanghai",
  "The+Blue+Lamp",
  "The+Lost+Weekend",
  "The+Strange+Love+of+Martha+Ivers",
  "Angels+with+Dirty+Faces",
  "White+Heat",
  "Panic+in+the+Streets",
  "Sweet+Smell+of+Success",
  "The+Big+Heat",
  "The+Reckless+Moment",
  "The+Breaking+Point",
  "Murder,+My+Sweet",
  "They+Live+by+Night",
  "Niagara",
  "The+Stranger",
  "Killer's+Kiss",
  "M",
  "Dark+Passage",
  "Suddenly",
  "Scarlet+Street",
  "Night+and+the+City",
  "The+Man+with+the+Golden+Arm",
  "Gun+Crazy",
  "Leave+Her+to+Heaven",
  "The+Harder+They+Fall",
  "All+the+King's+Men",
  "Vicki",
  "The+Window",
  "Stage+Fright",
  "D.O.A.",
  "High+Sierra",
  "Pickup+on+South+Street",
  "The+Naked+City",
  "The+Spider+Woman",
  "Thunder+Road",
  "Dead+End",
  "Kansas+City+Confidential",
  "Brute+Force",
  "Kiss+of+Death",
  "The+Petrified+Forest",
  "Detour",
  "Raw+Deal",
  "Nightmare+Alley",
  "Where+the+Sidewalk+Ends",
  "Backlash",
  "Jigsaw",
  "The+Woman+in+the+Window",
  "He+Walked+by+Night",
  "The+Roaring+Twenties",
  "Criss+Cross",
  "Hell+Drivers",
  "The+Desperate+Hours",
  "They+Won't+Believe+Me",
  "Thieves'+Highway",
  "Zero+Hour!",
  "Too+Late+for+Tears",
  "Confidential+Report",
  "This+Gun+for+Hire",
  "Brighton+Rock",
  "The+Hitch-Hiker",
  "Dead+Reckoning",
  "Force+of+Evil",
  "The+Letter",
  "The+Big+Combo",
  "Odd+Man+Out",
  "Dressed+to+Kill",
  "Party+Girl",
  "Violent+Saturday",
  "It",
  "Happy+Death+Day",
  "Get+Out",
  "The+Killing+of+a+Sacred+Deer",
  "Jeepers+Creepers+III",
  "The+Snowman",
  "Split",
  "1922",
  "The+Shape+of+Water",
  "Mother!",
  "Annabelle:+Creation",
  "Gerald's+Game",
  "Flatliners",
  "My+Friend+Dahmer",
  "Leatherface",
  "Alien:+Covenant",
  "Saw",
  "A+Cure+for+Wellness",
  "Halloween",
  "Life",
  "Bram+Stoker's+Dracula",
  "It+Comes+at+Night",
  "Silent+Hill",
  "The+Shining",
  "Annihilation",
  "The+Limehouse+Golem",
  "Killing+Ground",
  "Cult+of+Chucky",
  "Saw+3D:+The+Final+Chapter",
  "The+Bad+Batch",
  "Jeepers+Creepers",
  "47+Meters+Down",
  "Scream",
  "Death+Note",
  "Alien",
  "Winchester:+The+House+That+Ghosts+Built",
  "Psycho",
  "The+Conjuring",
  "The+Thing",
  "The+Nun",
  "Amityville:+The+Awakening",
  "Tragedy+Girls",
  "Raw",
  "The+Vault",
  "Saw+II",
  "The+Witch",
  "Saw+III",
  "Don't+Breathe",
  "10+Cloverfield+Lane",
  "The+Cabin+in+the+Woods",
  "The+Exorcist",
  "It:+Chapter+Two",
  "Darkness+Rising",
  "The+Conjuring+2",
  "Insidious:+The+Last+Key",
  "From+Dusk+Till+Dawn",
  "Jeepers+Creepers+II",
  "It+Follows",
  "The+Neon+Demon",
  "A+Nightmare+on+Elm+Street",
  "Dismissed",
  "Annabelle",
  "Sleepy+Hollow",
  "Wish+Upon",
  "Underworld:+Blood+Wars",
  "Gremlins",
  "Knock+Knock",
  "The+Mist",
  "Lights+Out",
  "The+Meg",
  "Crimson+Peak",
  "Saw+IV",
  "Resident+Evil:+The+Final+Chapter",
  "Hostel",
  "Saw+VI",
  "The+Ring",
  "Saw+V",
  "A+Serbian+Film",
  "Child's+Play",
  "Creep+2",
  "The+Babadook",
  "Constantine",
  "Poltergeist",
  "Grease",
  "The+Greatest+Showman",
  "Mamma+Mia!+Here+We+Go+Again",
  "Les+Misérables",
  "The+Rocky+Horror+Picture+Show",
  "The+Phantom+of+the+Opera",
  "West+Side+Story",
  "A+Star+Is+Born",
  "Hello,+Dolly!",
  "Moulin+Rouge!",
  "Mary+Poppins",
  "Chicago",
  "Robin+Hood:+Helter+i+strømpebukser",
  "Into+the+Woods",
  "The+Blues+Brothers",
  "Mamma+Mia!",
  "Labyrinth",
  "Sweeney+Todd:+The+Demon+Barber+of+Fleet+Street",
  "Rent",
  "Grease+2",
  "Hello+Again",
  "Singin'+in+the+Rain",
  "Annie",
  "Hairspray",
  "White+Christmas",
  "Snehvit+og+de+syv+dvergene",
  "Burlesque",
  "Christopher+Robin",
  "Across+the+Universe",
  "Askepott",
  "Little+Shop+of+Horrors",
  "The+Hunchback+of+Notre+Dame",
  "My+Fair+Lady",
  "Cry-Baby",
  "Rock+of+Ages",
  "Frozen+2",
  "The+Lure",
  "The+Doors",
  "The+Lorax",
  "Nine",
  "Basmati+Blues",
  "Dreamgirls",
  "Newsies",
  "Popeye",
  "Peter+Pan",
  "Tenacious+D+in+The+Pick+of+Destiny",
  "Rio",
  "Alice+i+Eventyrland",
  "Earth+Girls+Are+Easy",
  "Chitty+Chitty+Bang+Bang",
  "South+Park:+Bigger,+Longer+&+Uncut",
  "James+and+the+Giant+Peach",
  "Fiddler+on+the+Roof",
  "Sleeping+Beauty",
  "Dancer+in+the+Dark",
  "Pink+Floyd:+The+Wall",
  "The+Sword+in+the+Stone",
  "The+Wiz",
  "Kazaam",
  "Disney's+Newsies+the+Broadway+Musical",
  "Pinocchio",
  "Trolls+2",
  "High+School+Musical+3:+Senior+Year",
  "Pootie+Tang",
  "Happy+Feet",
  "Call+Me+by+Your+Name",
  "Fifty+Shades+Darker",
  "Fifty+Shades+of+Grey",
  "American+Beauty",
  "Newness",
  "Nocturnal+Animals",
  "Thelma",
  "Titanic",
  "Forrest+Gump",
  "A+Ghost+Story",
  "Breathe",
  "Me+Before+You",
  "Love",
  "SPF-18",
  "The+Reader",
  "Pride+&+Prejudice",
  "True+Romance",
  "Twilight",
  "The+Notebook",
  "Allied",
  "Everything,+Everything",
  "Edward+Scissorhands",
  "Silver+Linings+Playbook",
  "Her",
  "The+Other+Woman",
  "Troy",
  "Crazy,+Stupid,+Love.",
  "The+DUFF",
  "Den+store+Gatsby",
  "Lolita",
  "The+Curious+Case+of+Benjamin+Button",
  "Eternal+Sunshine+of+the+Spotless+Mind",
  "Kammerpiken",
  "Clueless",
  "She's+All+That",
  "Maudie",
  "The+Perks+of+Being+a+Wallflower",
  "Romeo+++Juliet",
  "Collateral+Beauty",
  "10+Things+I+Hate+About+You",
  "Bridesmaids",
  "Pretty+Woman",
  "Robin+Hood:+Prince+of+Thieves",
  "To+Rome+with+Love",
  "St.+Elmo's+Fire",
  "Scott+Pilgrim+vs.+the+World",
  "Dirty+Dancing",
  "50+First+Dates",
  "Fallen",
  "Blue+Is+the+Warmest+Color",
  "Easy+A",
  "Legend",
  "Pearl+Harbor",
  "The+Legend+of+Tarzan",
  "Cast+Away",
  "The+Fault+in+Our+Stars",
  "God's+Own+Country",
  "Our+Souls+at+Night",
  "Anna+Karenina",
  "Song+to+Song",
  "Tulip+Fever",
  "Flipped",
  "Midnight+in+Paris",
  "Sleeping+with+Other+People",
  "Qarib+Qarib+Singlle",
  "The+Twilight+Saga:+Breaking+Dawn+-+Part+2",
  "Brokeback+Mountain",
  "Forgetting+Sarah+Marshall",
  "Knocked+Up",
  "I,+Tonya",
  "Remember+the+Titans",
  "On+Wings+of+Eagles",
  "Creed",
  "Moneyball",
  "Dangal",
  "Warrior",
  "Rush",
  "42",
  "Talladega+Nights:+The+Ballad+of+Ricky+Bobby",
  "The+Waterboy",
  "The+Blind+Side",
  "Creed+II",
  "Borg+vs.+McEnroe",
  "Southpaw",
  "Rocky",
  "Million+Dollar+Baby",
  "Real+Steel",
  "Rudy",
  "Dodgeball:+A+True+Underdog+Story",
  "Unbroken",
  "She's+the+Man",
  "Point+Break",
  "Bleed+for+This",
  "Lords+of+Dogtown",
  "Jerry+Maguire",
  "The+Longest+Yard",
  "Invincible",
  "Goon:+Last+of+the+Enforcers",
  "Bring+It+On",
  "The+Mighty+Ducks",
  "Rocky+Balboa",
  "Green+Street+Hooligans",
  "Stick+It",
  "Never+Back+Down",
  "The+Wrestler",
  "Varsity+Blues",
  "The+Fighter",
  "Happy+Gilmore",
  "Rocky+IV",
  "Raging+Bull",
  "A+League+of+Their+Own",
  "Concussion",
  "Caddyshack",
  "White+Men+Can't+Jump",
  "Eddie+the+Eagle",
  "Foxcatcher",
  "Hands+of+Stone",
  "All+the+Right+Moves",
  "The+Rookie",
  "BASEketball",
  "Slap+Shot",
  "Days+of+Thunder",
  "The+Game+Plan",
  "The+60+Yard+Line",
  "Bend+It+Like+Beckham",
  "Kingpin",
  "Speed+Racer",
  "Over+the+Top",
  "The+Basketball+Diaries",
  "Nacho+Libre",
  "Major+League",
  "Bloodsport",
  "Ip+Man",
  "Goon",
  "Rocky+V",
  "Miracle",
  "Cool+Runnings",
  "Little+Giants",
  "Blades+of+Glory",
  "Chuck",
  "Cinderella+Man",
  "The+Greatest+Game+Ever+Played",
  "Coach+Carter",
  "Greater",
  "The+Cannonball+Run",
  "Champion",
  "Friday+Night+Lights",
  "Breath",
  "Raising+the+Bar",
  "Whip+It",
  "Any+Given+Sunday",
  "Kickboxer:+Vengeance",
  "Soul+Surfer",
  "Draft+Day",
  "Vision+Quest",
  "Air+Bud",
  "Rocky+III",
  "Ali",
  "Thank+You+for+Your+Service",
  "The+Beguiled",
  "Hacksaw+Ridge",
  "Darkest+Hour",
  "Ayla:+The+Daughter+of+War",
  "Inglourious+Basterds",
  "Saving+Private+Ryan",
  "Apocalypse+Now",
  "Pan's+Labyrinth",
  "Full+Metal+Jacket",
  "Braveheart",
  "The+Imitation+Game",
  "Megan+Leavey",
  "Black+Hawk+Down",
  "The+Wall",
  "American+Sniper",
  "The+Deer+Hunter",
  "Life+Is+Beautiful",
  "Salò,+or+the+120+Days+of+Sodom",
  "War+Dogs",
  "Fury",
  "13+Hours",
  "The+Pianist",
  "War+Machine",
  "Lone+Survivor",
  "Platoon",
  "Gone+with+the+Wind",
  "Atonement",
  "Casablanca",
  "Legends+of+the+Fall",
  "The+Patriot",
  "Unknown+Soldier",
  "The+Zookeeper's+Wife",
  "Lincoln",
  "Kingdom+of+Heaven",
  "Anthropoid",
  "The+Last+of+the+Mohicans",
  "Master+and+Commander:+The+Far+Side+of+the+World",
  "Free+State+of+Jones",
  "Downfall",
  "The+Great+Escape",
  "Objective,+Burma!",
  "Incendies",
  "Dr.+Strangelove+or:+How+I+Learned+to+Stop+Worrying+and+Love+the+Bomb",
  "Churchill",
  "The+Hurt+Locker",
  "Billy+Lynn's+Long+Halftime+Walk",
  "Valkyrie",
  "Sand+Castle",
  "Empire+of+the+Sun",
  "Dracula+Untold",
  "Body+of+Lies",
  "Lawrence+of+Arabia",
  "The+Dirty+Dozen",
  "The+Boy+in+the+Striped+Pajamas",
  "Their+Finest",
  "The+English+Patient",
  "We+Were+Soldiers",
  "MASH",
  "Dear+John",
  "The+Thin+Red+Line",
  "King+Arthur",
  "Merry+Christmas+Mr.+Lawrence",
  "Das+Boot",
  "The+Exception",
  "They+Were+Expendable",
  "Spartacus",
  "Journey's+End",
  "The+Last+Samurai",
  "Enemy+at+the+Gates",
  "War+Horse",
  "Alexander",
  "A+Bridge+Too+Far",
  "Good+Morning,+Vietnam",
  "Macbeth",
  "Red+Tails",
  "Barry+Lyndon",
  "Jarhead",
  "Come+and+See",
  "Revolt",
  "An+Ordinary+Man",
  "Behind+Enemy+Lines",
  "Whiskey+Tango+Foxtrot",
  "The+Sum+of+All+Fears",
  "The+Ottoman+Lieutenant",
  "Australia",
  "USS+Indianapolis:+Men+of+Courage",
  "Cold+Mountain",
  "Hostiles",
  "The+Lord+of+the+Rings:+The+Fellowship+of+the+Ring",
  "Interstellar",
  "The+Lord+of+the+Rings:+The+Return+of+the+King",
  "The+Hunger+Games",
  "Harry+Potter+and+the+Deathly+Hallows:+Part+2",
  "The+Lost+City+of+Z",
  "The+Post",
  "Only+the+Brave",
  "The+Glass+Castle",
  "The+Irishman",
  "LBJ",
  "Molly's+Game",
  "Victoria+and+Abdul",
  "Professor+Marston+and+the+Wonder+Women",
  "Billionaire+Boys+Club",
  "Schindler's+List",
  "Hidden+Figures",
  "Lion",
  "Marshall",
  "Goodfellas",
  "Stronger",
  "Bronson",
  "First+Man",
  "Monster",
  "Catch+Me+If+You+Can",
  "Bohemian+Rhapsody",
  "In+the+Heart+of+the+Sea",
  "The+Intouchables",
  "A+Beautiful+Mind",
  "Girl,+Interrupted",
  "Into+the+Wild",
  "All+Eyez+on+Me",
  "The+Founder",
  "Sully",
  "Chasing+the+Dragon",
  "12+Years+a+Slave",
  "The+Social+Network",
  "The+Pursuit+of+Happyness",
  "Snowden",
  "Gotti",
  "Tombstone",
  "Dallas+Buyers+Club",
  "Bonnie+and+Clyde",
  "Black+Mass",
  "Erin+Brockovich",
  "Mask",
  "The+Danish+Girl",
  "Jackie",
  "The+Elephant+Man",
  "Film+Stars+Don't+Die+in+Liverpool",
  "The+Current+War",
  "The+Stanford+Prison+Experiment",
  "Argo",
  "Rebel+in+the+Rye",
  "Blow",
  "The+Theory+of+Everything",
  "Mary+Queen+of+Scots",
  "Amadeus",
  "Mark+Felt:+The+Man+Who+Brought+Down+the+White+House",
  "6+Below:+Miracle+on+the+Mountain",
  "The+King's+Speech",
  "Dog+Day+Afternoon",
  "The+Infiltrator",
  "Murder+on+the+Orient+Express",
  "Wind+River",
  "All+the+Money+in+the+World",
  "Suburbicon",
  "Good+Time",
  "The+Hateful+Eight",
  "Brawl+in+Cell+Block+99",
  "The+Shawshank+Redemption",
  "OtherLife",
  "Roman+J.+Israel,+Esq.",
  "November+Criminals",
  "Pulp+Fiction",
  "The+Godfather",
  "The+Silence+of+the+Lambs",
  "The+Outsiders",
  "Thumper",
  "Gone+Girl",
  "The+Usual+Suspects",
  "Léon:+The+Professional",
  "Shot+Caller",
  "Se7en",
  "The+Departed",
  "The+Book+of+Henry",
  "American+Psycho",
  "The+Accountant",
  "Sicario",
  "Hell+or+High+Water",
  "The+Hatton+Garden+Job",
  "Prisoners",
  "Drive",
  "The+Green+Mile",
  "The+Girl+on+the+Train",
  "Jack+Reacher:+Vend+aldri+tilbake",
  "Zodiac",
  "The+Invisible+Guest",
  "No+Country+for+Old+Men",
  "Fargo",
  "Furious+7",
  "American+History+X",
  "Spotlight",
  "12+Angry+Men",
  "A+Clockwork+Orange",
  "The+Big+Lebowski",
  "Detroit",
  "Taxi+Driver",
  "Kill+Bill:+Vol.+1",
  "Michael+Clayton",
  "The+Girl+with+the+Dragon+Tattoo",
  "The+Equalizer",
  "Gangs+of+New+York",
  "Reservoir+Dogs",
  "Going+in+Style",
  "City+of+God",
  "Security",
  "Patriots+Day",
  "The+Godfather:+Part+II",
  "Jack+Reacher",
  "The+Nice+Guys",
  "Live+by+Night",
  "Fifty+Shades+Freed",
  "Wonder",
  "The+Room",
  "The+Florida+Project",
  "Arrival",
  "Most+Beautiful+Island",
  "Let+There+Be+Light",
  "Patti+Cake$",
  "Phantom+Thread",
  "Requiem+for+a+Dream",
  "The+Only+Living+Boy+in+New+York",
  "Fight+Club",
  "The+Lord+of+the+Rings:+The+Two+Towers",
  "Avatar+2",
  "The+Shack",
  "Man+of+Steel",
  "Suicide+Squad+2",
  "Pirates+of+the+Caribbean:+The+Curse+of+the+Black+Pearl",
  "Star+Wars:+Episode+I+-+The+Phantom+Menace",
  "Colossal",
  "Star+Wars:+Episode+V+-+The+Empire+Strikes+Back",
  "Clash+of+the+Titans",
  "300",
  "Star+Wars:+Episode+VI+-+Return+of+the+Jedi",
  "Van+Helsing",
  "Warcraft:+The+Beginning",
  "The+Revenant",
  "Silence",
  "There+Will+Be+Blood",
  "Zero+Dark+Thirty",
  "Bridge+of+Spies",
  "The+Promise",
  "Caligula",
  "Padmavati",
  "Straight+Outta+Compton",
  "The+Aviator",
  "Marie+Antoinette",
  "W.",
  "The+Finest+Hours",
  "The+13th+Warrior",
  "Outlaw+King",
  "Ben-Hur",
  "Shakespeare+in+Love",
  "First+They+Killed+My+Father",
  "München",
  "Pompeii",
  "Robin+Hood",
  "Viceroy's+House",
  "The+Right+Stuff",
  "Chappaquiddick",
  "The+Assassination+of+Jesse+James+by+the+Coward+Robert+Ford",
  "Public+Enemies",
  "The+Crucible",
  "Apollo+13",
  "Whiplash",
  "8+Mile",
  "Almost+Famous",
  "Bill+&+Ted's+Excellent+Adventure",
  "Brad's+Status",
  "Pitch+Perfect+2",
  "Forever+My+Girl",
  "Footloose",
  "School+of+Rock",
  "Selena",
  "O+Brother,+Where+Art+Thou?",
  "Step+Up",
  "American+Satan",
  "Sing+Street",
  "Walk+the+Line",
  "Magic+Mike+XXL",
  "Dick+Tracy",
  "9+Songs",
  "This+Is+Spinal+Tap",
  "August+Rush",
  "Florence+Foster+Jenkins",
  "Coyote+Ugly",
  "Sister+Act+2:+Back+in+the+Habit",
  "Billy+Elliot",
  "Youth",
  "Saturday+Night+Fever",
  "If+I+Stay",
  "Inside+Llewyn+Davis",
  "That+Thing+You+Do!",
  "Barracuda",
  "Piano",
  "The+Bodyguard",
  "Wayne's+World",
  "Ray",
  "Begin+Again",
  "High+Fidelity",
  "Bill+&+Ted's+Bogus+Journey",
  "Sister+Act",
  "Popstar:+Never+Stop+Never+Stopping",
  "Black+Snake+Moan",
  "Rock+Dog",
  "Flashdance",
  "The+Piano+Teacher",
  "How+to+Talk+to+Girls+at+Parties",
  "Walk+Hard:+The+Dewey+Cox+Story",
  "Be+Cool",
  "Rock+Star",
  "Band+Aid",
  "Alvin+and+the+Chipmunks",
  "Saving+Mr.+Banks",
  "The+Last+Song",
  "The+Wedding+Singer",
  "Beaches",
  "I+Saw+the+Light",
  "Up+in+Smoke",
  "Pirate+Radio",
  "I'm+Not+There.",
  "Empire+Records",
  "The+Runaways",
  "Kinky+Boots",
  "La+Vie+en+Rose",
  "Freaky+Friday",
  "XOXO",
  "The+Adventures+of+Priscilla,+Queen+of+the+Desert",
  "We+Are+Your+Friends",
  "Crazy+Heart",
  "The+Lizzie+McGuire+Movie",
  "Alvin+and+the+Chipmunks:+The+Road+Chip",
  "Save+the+Last+Dance",
  "Streets+of+Fire",
  "La+Bamba",
  "Get+Him+to+the+Greek",
  "Blade+Runner+2049",
  "Ittefaq",
  "Predestination",
  "The+Prestige",
  "Eyes+Wide+Shut",
  "You+Were+Never+Really+Here",
  "Ex+Machina",
  "Unbreakable",
  "Watchmen",
  "Before+I+Fall",
  "Memento",
  "The+Sixth+Sense",
  "Shutter+Island",
  "The+Hunger+Games:+Catching+Fire",
  "Unlocked",
  "Prometheus",
  "Oldboy",
  "Divergent",
  "Inside+Man",
  "Mulholland+Drive",
  "Blade+Runner",
  "Singularity",
  "Donnie+Darko",
  "Passengers",
  "The+Circle",
  "Captain+America:+The+First+Avenger",
  "Jurassic+Park",
  "The+Martian",
  "The+Veil",
  "Captain+America:+The+Winter+Soldier",
  "Pacific+Rim",
  "Aliens",
  "Iron+Man",
  "Terminator+Genisys",
  "Maze+Runner:+The+Death+Cure",
  "Okja",
  "2001:+A+Space+Odyssey",
  "24+Hours+to+Live",
  "Glass",
  "Red+Sparrow",
  "Django+Unchained",
  "The+Good,+the+Bad+and+the+Ugly",
  "Brimstone",
  "True+Grit",
  "Unforgiven",
  "Blazing+Saddles",
  "Bone+Tomahawk",
  "The+Ballad+of+Lefty+Brown",
  "Westworld",
  "Wild+Wild+West",
  "Silverado",
  "Once+Upon+a+Time+in+the+West",
  "The+Homesman",
  "Dances+with+Wolves",
  "The+Ridiculous+6",
  "The+Kid",
  "A+Million+Ways+to+Die+in+the+West",
  "Open+Range",
  "Lonely+Are+the+Brave",
  "In+a+Valley+of+Violence",
  "Butch+Cassidy+and+the+Sundance+Kid",
  "Young+Guns",
  "The+Killer",
  "The+Quick+and+the+Dead",
  "Jonah+Hex",
  "Cowboys+&+Aliens",
  "Virginia+City",
  "The+Lone+Ranger",
  "3:10+to+Yuma",
  "Young+Guns+II",
  "High+Plains+Drifter",
  "Back+to+the+Future+Part+III",
  "Of+Human+Hearts",
  "The+Mask+of+Zorro",
  "The+Jade+Pendant",
  "Trooper+Hook",
  "A+Fistful+of+Dollars",
  "Justice",
  "Woman+Walks+Ahead",
  "Rango",
  "For+a+Few+Dollars+More",
  "The+Searchers",
  "Abraham+Lincoln:+Vampire+Hunter",
  "Quigley+Down+Under",
  "Wyatt+Earp",
  "Jeremiah+Johnson",
  "Rio+Lobo",
  "Dead+Man",
  "High+Noon",
  "Pale+Rider",
  "The+Man+from+Snowy+River",
  "Two+Rode+Together",
  "Jane+Got+a+Gun",
  "Hickok",
  "Forsaken",
  "Urban+Cowboy",
  "Heaven's+Gate",
  "The+Salvation",
  "The+Duel",
  "¡Three+Amigos!",
  "Spirit:+Stallion+of+the+Cimarron",
  "Far+and+Away",
  "The+Outlaw+Josey+Wales",
  "The+Legend+of+Zorro",
  "The+Wild+Bunch",
  "North+to+Alaska",
  "The+Shakiest+Gun+in+the+West",
  "Shane",
  "Seraphim+Falls",
  "McLintock!",
  "Maverick",
  "Rio+Bravo",
  "Giant",
  "Rio+Grande",
  "Hidalgo",
  "Seven+Brides+for+Seven+Brothers",
  "The+Treasure+of+the+Sierra+Madre",
  "The+Sisters+Brothers",
  "Appaloosa",
  "National+Treasure+3",
  "El+Topo",
  "Shanghai+Noon",
  "Barbary+Coast",
  "Slow+West",
  "Paint+Your+Wagon",
  "The+Cheyenne+Social+Club",
  "Outlaws+and+Angels",
  "The+Horse+Whisperer",
  "Relentless",
];

function splitElements(str){
  if (str !== undefined){
    return str.split(",").map((item) => {
      return item.trim();
    })
  }
}

let progress = 0;
// Access omdb api with movie as query, extract wanted data and save to database.
for(let movie in list_of_movies){
        let omdb = 'http://www.omdbapi.com/?apikey=8fda5bb&t=' + list_of_movies[movie] + '&type=movie&plot=full';
        let omdbData = '';
        transferMovie(omdb, omdbData);
}


function transferMovie(omdb, omdbData) {
  setTimeout(function () {
    http.get(omdb, (res) => {
      // A chunk of data has been recieved.
      res.on('data', (chunk) => {
        omdbData += chunk;
      });
      // The whole response has been received. save the result to db.
      res.on('end', () => {
        omdbData = JSON.parse(omdbData);
        let genre = splitElements(omdbData.Genre);
        let director = splitElements(omdbData.Director);
        let actors = splitElements(omdbData.Actors);
        if (!(omdbData.Title === undefined)) {
          let new_movie = new movie_model({
            title: omdbData.Title,
            year: omdbData.Year,
            runtime: omdbData.Runtime,
            genre: genre,
            director: director,
            actors: actors,
            plot: omdbData.Plot,
            poster: omdbData.Poster,
            readMore: omdbData.Website,
          });

          db.collection('movies').save(new_movie);
        }
        progress += 1;
        console.log(parseFloat(Math.round((100/list_of_movies.length) * progress)).toFixed(2) + "% of data transfered");
      });
    }).on("error", (err) => {
      console.log("Error: " + err.message);
    });
  }, 100);
}
